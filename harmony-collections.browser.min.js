!function(Name,exports,global){"use strict";function isObject(o){return Object(o)===o}var hasOwn=Object.prototype.hasOwnProperty,glue=function(){var GOPN=Object.getOwnPropertyNames,desc={configurable:!0,writable:!0,enumerable:!1},code=(Object+"").split("Object"),toString=(new Function('return function toString(){ return "'+code[0]+'"+this.name+"'+code[1]+'" }'))();function defineMethods(o,v){return Array.isArray(v)?v.forEach(function(v){desc.value=v,Object.defineProperty(o,v.name,desc)}):(desc.value=v,Object.defineProperty(o,v.name,desc)),desc.value=null,o}function fakeNative(fn){return defineMethods(fn,toString)}return fakeNative(toString),defineMethods(Object,function getOwnPropertyNames(o){var props=GOPN(o);return hasOwn.call(o,"valueOf")&&o.valueOf.ns&&props.splice(props.indexOf("valueOf"),1),props}),fakeNative(Object.getOwnPropertyNames),function(methods){var Ctor=methods.shift();return defineMethods(Ctor.prototype,methods),methods.forEach(fakeNative),fakeNative(Ctor)}}();function Pair(key,value){this.key=key,this.value=value}var WeakMap=exports.WeakMap=function(weakmaps){return glue([function WeakMap(){if(this instanceof WeakMap)weakmaps(this).lookup=new Name;else return new WeakMap},function get(key){return weakmaps(this).lookup(key).value},function set(key,value){return weakmaps(this).lookup(key).value=value},function has(key){return hasOwn.call(weakmaps(this).lookup(key),"value")},function delet\u0065(key){var store=weakmaps(this).lookup(key);return hasOwn.call(store,"value")?(delete store.value,!0):!1}])}(new Name),Hash=exports.Hash="Hash"in global?global.Hash:function(hashes){return glue([function Hash(){if(this instanceof Hash)hashes.set(this,Object.create(null));else return new Hash},function get(key){return hashes.get(this)[key]},function set(key,value){return hashes.get(this)[key]=value},function has(key){return key in hashes.get(this)},function delet\u0065(key){var hash=hashes.get(this),has=key in hash;return key in hash?(delete hash[key],!0):!1},function keys(){return Object.keys(hashes.get(this))},function values(){var hash=hashes.get(this);return Object.keys(hash).map(function(key){return hash[key]})},function iterate(callback,context){var hash=hashes.get(this);context=isObject(context)?context:global;for(var k in hash)callback.call(context,hash[k],k)},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out},function toObject(){var out={};return this.iterate(function(value,key){out[key]=value}),out}])}(new WeakMap),Map=exports.Map="Map"in global?global.Map:function(maps){var MapArray=glue([function MapArray(){this.tables=[new Hash,new WeakMap],this.keys=[],this.values=[]},function get(key){return this.keys[this.tables[+isObject(key)].get(key)]},function set(key,value){var table=this.tables[+isObject(key)],index=table.get(key);return index===undefined?(table.set(key,this.keys.length),this.keys.push(key),this.values.push(value)):(this.keys[index]=key,this.values[index]=value),value},function has(key){return this.tables[+isObject(key)].has(key)},function delet\u0065(key){var index=this.tables[+isObject(key)].get(key);return index===undefined?!1:(this.tables[+isObject(key)].delete(key),this.keys.splice(index,1),this.values.splice(index,1),!0)}]);return glue([function Map(){if(this instanceof Map)maps.set(this,new MapArray);else return new Map},function get(key){return maps.get(this).get(key)},function set(key,value){return maps.get(this).set(key,value)},function has(key){return maps.get(this).has(key)},function delet\u0065(key){return maps.get(this).delete(key)},function keys(){return maps.get(this).keys.slice()},function values(){return maps.get(this).values.slice()},function iterate(callback,context){var map=maps.get(this),keys=map.keys,values=map.values;context=isObject(context)?context:global;for(var i=0,len=keys.length;i<len;i++)callback.call(context,values[i],keys[i])},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out}])}(new WeakMap),Set=exports.Set="Set"in global?global.Set:function(sets){return glue([function Set(){if(this instanceof Set)sets.set(this,new Map);else return new Set},function add(key){return sets.get(this).set(key,!0)},function has(key){return sets.get(this).has(key)},function delet\u0065(key){return sets.get(this).delete(key)},function values(callback,context){return sets.get(this).keys()},function iterate(callback,context){this.values().forEach(callback,isObject(context)?context:global)}])}(new WeakMap)}(function(){"use strict";function namespace(obj,key){var store=Object.create(null),origVO=obj.valueOf||Object.prototype.valueOf;return Object.defineProperty(obj,"valueOf",{configurable:!0,writable:!0,value:function valueOf(value){return value!==key?origVO.apply(this,arguments):store}}),obj.valueOf.ns=!0,store}return function Name(){var key=this;return function(obj){var store=obj.valueOf(key);return store!==obj?store:namespace(obj,key)}}}(),typeof module=="undefined"?this:module.exports,(new Function("return this"))())