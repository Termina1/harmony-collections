!function(Name,exports,global){"use strict";function exporter(name,init){name in global||(global[name]=init())}function isObject(o){return Object(o)===o}var hasOwn=Object.prototype.hasOwnProperty,makeName,glue=function(){var GOPN=Object.getOwnPropertyNames,desc={configurable:!0,writable:!0,enumerable:!1},code=(Object+"").replace(/\n/g,"\\n").split("Object"),toString=(new Function("return function toString(){ return '"+code[0]+"'+this.name+'"+code[1]+"' }"))();Function.prototype.name||Object.defineProperty(Function.prototype,"name",{get:function(){if(this===Function.prototype)return"Empty";var src=Function.prototype.toString.call(this);return src=src.slice(9,src.indexOf("(")),Object.defineProperty(this,"name",{value:src}),src}});function definer(o,v){var vname=v.name;return vname.slice(-1)==="_"&&(vname=vname.slice(0,-1)),desc.value=v,Object.defineProperty(o,vname,desc),vname}function defineMethods(o,v){return Array.isArray(v)?v.forEach(function(v){definer(o,v)}):definer(o,v),desc.value=null,o}function fakeNative(fn){return defineMethods(fn,toString)}fakeNative(toString);var names=[];return makeName=function(){var name="_"+(Math.random()/1.1).toString(36).slice(2);return names.push(name),name},defineMethods(Object,function getOwnPropertyNames(o){var props=GOPN(o);return names.forEach(function(name){hasOwn.call(o,name)&&props.splice(props.indexOf(name),1)}),props}),fakeNative(Object.getOwnPropertyNames),function(methods){var Ctor=methods.shift(),brand="[object "+Ctor.name+"]";return methods.push(function toString(){return brand}),defineMethods(Ctor.prototype,methods),Ctor.prototype.constructor=Ctor,methods.forEach(fakeNative),fakeNative(Ctor)}}();function Pair(key,value){this.key=key,this.value=value}var storage=new Name(makeName());exporter("WeakMap",function(){return glue([function WeakMap(){if(this instanceof WeakMap)storage(this).weakmap=new Name(makeName());else return new WeakMap},function get(key){return storage(this).weakmap(key).value},function set(key,value){return storage(this).weakmap(key).value=value},function has(key){return hasOwn.call(storage(this).weakmap(key),"value")},function delete_(key){var store=storage(this).weakmap(key);return hasOwn.call(store,"value")?(delete store.value,!0):!1}])}),exporter("Hash",function(){return glue([function Hash(){if(this instanceof Hash)storage(this).hash=Object.create(null);else return new Hash},function get(key){return storage(this).hash[key]},function set(key,value){return storage(this).hash[key]=value},function has(key){return key in storage(this).hash},function delete_(key){var hash=storage(this).hash,has=key in hash;return key in hash?(delete hash[key],!0):!1},function keys(){return Object.keys(storage(this).hash)},function values(){var hash=storage(this).hash;return Object.keys(hash).map(function(key){return hash[key]})},function iterate(callback,context){var hash=storage(this).hash;context=isObject(context)?context:global;for(var k in hash)callback.call(context,hash[k],k)},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out},function toObject(){var out={};return this.iterate(function(value,key){out[key]=value}),out}])}),exporter("Map",function(){return glue([function Map(){if(this instanceof Map)storage(this).map={tables:[new Hash,new WeakMap],keys:[],values:[]};else return new Map},function get(key){var map=storage(this).map;return map.values[map.tables[+isObject(key)].get(key)]},function set(key,value){var map=storage(this).map,table=map.tables[+isObject(key)],index=table.get(key);return index===undefined?(table.set(key,map.keys.length),map.keys.push(key),map.values.push(value)):(map.keys[index]=key,map.values[index]=value),value},function has(key){return storage(this).map.tables[+isObject(key)].has(key)},function delete_(key){var map=storage(this).map,table=map.tables[+isObject(key)],index=table.get(key);return index===undefined?!1:(table.delete(key),map.keys.splice(index,1),map.values.splice(index,1),!0)},function keys(){return storage(this).map.keys.slice()},function values(){return storage(this).map.values.slice()},function iterate(callback,context){var map=storage(this).map,keys=map.keys,values=map.values;context=isObject(context)?context:global;for(var i=0,len=keys.length;i<len;i++)callback.call(context,values[i],keys[i])},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out}])}),exporter("Set",function(){return glue([function Set(){if(this instanceof Set)storage(this).set=new Map;else return new Set},function add(key){return storage(this).set.set(key,!0)},function has(key){return storage(this).set.has(key)},function delete_(key){return storage(this).set.delete(key)},function values(callback,context){return storage(this).set.keys()},function iterate(callback,context){this.values().forEach(callback,isObject(context)?context:global)}])})}(function(){"use strict";var hasOwn=Object.prototype.hasOwnProperty;function namespace(obj,key,name){var store=Object.create(null);return Object.defineProperty(obj,name,{value:function(value){return value!==key?origVO.apply(this,arguments):store}}),store}return function Name(name){var key=this;return function(obj){return hasOwn.call(obj,name)?obj[name](key):namespace(obj,key,name)}}}(),typeof module=="undefined"?this:module.exports,(new Function("return this"))())