!function(Name,exports,global){"use strict";if(!Function.prototype.name){var toCode=Function.call.bind(Function.prototype.toString);Object.defineProperty(Function.prototype,"name",{get:function(){if(this===Function.prototype)return"Empty";var src=toCode(this);return src=src.slice(9,src.indexOf("(")),Object.defineProperty(this,"name",{value:src}),src}})}function isObject(o){return Object(o)===o}function initializer(){function defineByName(o,fn){var vname=typeof fn.name=="string"?fn.name.replace(/_$/,""):"";return hiddenDesc.value=fn,Object.defineProperty(o,vname,hiddenDesc),fakeNativeCode(fn),hiddenDesc.value=null,vname}function defineMethods(o,v){return Array.isArray(v)?v.forEach(function(v){defineByName(o,v)}):defineByName(o,v),o}var fakeNativeCode=Function.__proto__?function fakeNativeCode(fn){return fn!==toString&&(fn.__proto__=toString),fn}:function fakeNativeCode(fn){return fn.toString!==toString&&defineMethods(fn,toString),fn},code='return function toString(){ return "'+(Object+"").replace(/\n/g,"\\n").replace("Object",'"+this.name+"')+'" }',hiddenDesc={configurable:!0,writable:!0,enumerable:!1},toString=Function(code)();return defineMethods(toString,toString),{makeRandomKey:function(){var randomKeys=Object.create(null),properties=Object.getOwnPropertyNames;return defineMethods(Object,function getOwnPropertyNames(o){return properties(o).filter(function(key){return!(key[0]==="_"||key in randomKeys)})}),function makeRandomKey(){var key="_"+(Math.random()/1.1).toString(36).slice(2);return randomKeys[key]=!0,key}}(),assemble:function(Ctor,methods){var brand="[object "+Ctor.name+"]";return methods.push(function toString(){return brand}),methods.forEach(fakeNativeCode),defineMethods(Ctor.prototype,methods),Ctor.prototype.constructor=Ctor,fakeNativeCode(Ctor)},exporter:function(name,init){exports[name]=init()}}}function Pair(key,value){this.key=key,this.value=value}var prep=initializer(),hasOwn=Function.call.bind({}.hasOwnProperty),storage=new Name(prep.makeRandomKey());prep.exporter("WeakMap",function(){return prep.assemble(function WeakMap(){if(!(this instanceof WeakMap))return new WeakMap;storage(this).weakmap=new Name(prep.makeRandomKey())},[function get(key){return storage(this).weakmap(key).value},function set(key,value){return storage(this).weakmap(key).value=value},function has(key){return hasOwn(storage(this).weakmap(key),"value")},function delete_(key){var store=storage(this).weakmap(key);return hasOwn(store,"value")?(delete store.value,!0):!1}])}),prep.exporter("Hash",function(){return prep.assemble(function Hash(){if(!(this instanceof Hash))return new Hash;storage(this).hash=Object.create(null)},[function get(key){return storage(this).hash[key]},function set(key,value){return storage(this).hash[key]=value},function has(key){return key in storage(this).hash},function delete_(key){var hash=storage(this).hash,has=key in hash;return key in hash?(delete hash[key],!0):!1},function keys(){return Object.keys(storage(this).hash)},function values(){var hash=storage(this).hash;return Object.keys(hash).map(function(key){return hash[key]})},function iterate(callback,context){var hash=storage(this).hash;context=isObject(context)?context:global;for(var k in hash)callback.call(context,hash[k],k)},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out},function toObject(){var out={};return this.iterate(function(value,key){out[key]=value}),out}])}),prep.exporter("Map",function(){return prep.assemble(function Map(){if(!(this instanceof Map))return new Map;storage(this).map={tables:[new Hash,new WeakMap],keys:[],values:[]}},[function get(key){var map=storage(this).map;return map.values[map.tables[+isObject(key)].get(key)]},function set(key,value){var map=storage(this).map,table=map.tables[+isObject(key)],index=table.get(key);return index===undefined?(table.set(key,map.keys.length),map.keys.push(key),map.values.push(value)):(map.keys[index]=key,map.values[index]=value),value},function has(key){return storage(this).map.tables[+isObject(key)].has(key)},function delete_(key){var map=storage(this).map,table=map.tables[+isObject(key)],index=table.get(key);return index===undefined?!1:(table.delete(key),map.keys.splice(index,1),map.values.splice(index,1),!0)},function keys(){return storage(this).map.keys.slice()},function values(){return storage(this).map.values.slice()},function iterate(callback,context){var map=storage(this).map,keys=map.keys,values=map.values;context=isObject(context)?context:global;for(var i=0,len=keys.length;i<len;i++)callback.call(context,values[i],keys[i])},function toArray(){var out=[];return this.iterate(function(value,key){out.push(new Pair(key,value))}),out}])}),prep.exporter("Set",function(){return prep.assemble(function Set(){if(!(this instanceof Set))return new Set;storage(this).set=new Map},[function add(key){return storage(this).set.set(key,!0)},function has(key){return storage(this).set.has(key)},function delete_(key){return storage(this).set.delete(key)},function values(callback,context){return storage(this).set.keys()},function iterate(callback,context){this.values().forEach(callback,isObject(context)?context:global)}])})}(function(hasOwn){"use strict";function namespace(obj,key,name){var store=Object.create(null);return Object.defineProperty(obj,name,{value:Function("key","store",'"use strict"; return function(value){ if (value === key) return store }')(key,store)}),store}return function Name(name){var key=this instanceof Name?this:Object.create(Name.prototype);return function(obj){return hasOwn(obj,name)?obj[name](key):namespace(obj,key,name)}}}(Function.call.bind({}.hasOwnProperty)),typeof module=="undefined"?this:module.exports,Function("return this")())