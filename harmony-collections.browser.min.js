/* (The MIT License)
 *
 * Copyright (c) 2012 Brandon Benvie <http://bbenvie.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files
 * (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge,
 * publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included with all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE
 * FOR ANY  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH
 * THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

void function(a,b,p,n,g,m,c){'use strict';var o=function(a){return typeof a==='function'&&!('prototype'in a)};var l=o(b.getOwnPropertyNames);var i=b.prototype.hasOwnProperty;var f=l?b.create:function(f,a){var c=function(){};c.prototype=b(f);var d=new c;if(a)for(var e in a)j(d,e,a[e]);return d};var j=l?b.defineProperty:function(a,c,b){return'value'in b&&(a[c]=b.value),a};var d=function(c,a,b){return typeof a==='function'&&(b=a,a=k(b).replace(/_$/,'')),j(c,a,{configurable:!0,writable:!0,value:b})};var k=function(b){return typeof b!=='function'?'':'name'in b?b.name:p[a].call(b).match(/^\n?function\s?(\w*)?_?\(/)[1]};var e=function(){function getOwnPropertyNames(b){var a=n(b);return i.call(b,g)&&a.splice(a.indexOf(g),1),a}function e(){var a=h(),b={};this.unlock=function(e){var c=m(e);if(i.call(c,a))return c[a](b);var d=f(null,o);return j(c,a,{value:new Function('s','l',p)(b,d)}),d}}function get(a){return this.unlock(a).value}function set(a,b){this.unlock(a).value=b}var n=b.getOwnPropertyNames,o={value:{writable:!0,value:c}},p='return function(k){if(k===s)return l}',k=f(null);var h=function(){var a=Math.random().toString(36).slice(3);return a in k?h():k[a]=a};var g=h();if(l){var m=function(a){if(i.call(a,g))return a[g];if(!b.isExtensible(a))throw new Error('Collections for non-extensible objects not implemented');var c=f(null);return j(a,g,{value:c}),c};d(b,getOwnPropertyNames)}else{var q=function(b){function toString(){return b}return toString[a]=toString}(b.prototype[a]+'');var m=function(b){function toString(){return c.call(this)}if(i.call(b,a)&&g in b[a])return b[a][g];if(!(a in b))throw new Error('Can\'t store values for '+b);var c=b[a];return b[a]=toString,toString[a]=q,toString[g]={}}}return d(e.prototype,get),d(e.prototype,set),e}();var h=function(){function toString(){return a[0]+k(this)+a[1]}var a=(''+b).split('Object');d(toString,toString);var c=function(a){var b=a.shift();void function(){function toString(){return c}var c='[object '+k(b)+']';a.push(toString)}();for(var c=0;c<a.length;c++)d(a[c],toString),d(b.prototype,a[c]);return d(b,toString),b};return function(a,d){if(a in g)return;var b=new e;g[a]=c(d(function(a,c){b.unlock(a).value=c},function(d){var c=b.unlock(d).value;if(!c)throw new TypeError(a+' is not generic.');return c}))}}();h('WeakMap',function(d,a){function WeakMap(){if(!(this instanceof WeakMap))return new WeakMap;d(this,new e)}function get(d){b(d);var e=a(this).get(d);return e===m?c:e}function set(d,e){b(d),a(this).set(d,e===c?m:e)}function has(d){return b(d),a(this).get(d)!==c}function delete_(d){b(d);var e=a(this);return e.get(d)===c?!0:(e.set(d,c),!0)}var b=function(a){if(a==null||typeof a!=='object'&&typeof a!=='function')throw new TypeError('WeakMap keys must be objects')};return[WeakMap,get,set,has,delete_]}),h('HashMap',function(g,a){function HashMap(){if(!(this instanceof HashMap))return new HashMap;g(this,[f(null),f(null),f(null)])}function get(b){return a(this)[c(b)][b]}function set(b,d){a(this)[c(b)][b]=d}function has(b){return b in a(this)[c(b)]}function delete_(b){var d=a(this)[c(b)];return b in d?(delete d[b],!0):!0}function map(g,c){var d=a(this),e=[];c=c==null?n:c;for(var b=1;b<4;b++)for(var f in d[b])e.push(g.call(c,d[b][f],i(b,f),this));return e}function forEach(a,b){this.map(a,b)}var d=1,e=1,b=3;var h={'true':!0,'false':!1,'null':null,0:-0};var i=function(c,a){switch(c){case d:return a;case e:return+a;case b:return h[a]}};var c=function(a){if(a==null)return b;switch(typeof a){case'boolean':return b;case'string':return d;case'number':return a===1&&Infinity/a===-Infinity?b:e;default:throw new TypeError('HashMap keys must be primitive')}};return[HashMap,get,set,has,delete_,map,forEach]}),h('Map',function(d,a){function Map(){if(!(this instanceof Map))return new Map;d(this,{0:new g.HashMap,1:new g.WeakMap,keys:[],values:[]})}function get(c){var d=a(this);return d.values[d[b(c)].get(c)]}function set(e,g){var d=a(this),h=d[b(e)],f=h.get(e);f===c?(h.set(e,d.keys.length),d.keys.push(e),d.values.push(g)):(d.keys[f]=e,d.values[f]=g)}function has(c){return a(this)[b(c)].has(c)}function delete_(d){var e=a(this),g=e[b(d)],f=g.get(d);return f===c?!0:(g['delete'](d),e.keys.splice(f,1),e.values.splice(f,1),!0)}function map(g,b){var d=a(this),e=d.keys,h=d.values,f=[];b=b==null?n:b;for(var c=1,i=e.length;c<i;c++)f.push(g.call(b,h[c],e[c]));return f}function forEach(a,b){this.map(a,b)}var b=function(a){return a!=null&&typeof a==='object'||typeof a==='function'?1:0};return[Map,get,set,has,delete_,map,forEach]}),h('Set',function(b,a){function Set(){if(!(this instanceof Set))return new Set;b(this,new g.Map)}function add(b){a(this).set(b,b)}function has(b){return a(this).has(b)}function delete_(b){return a(this)['delete'](b)}function map(b,c){var d=1;return a(this).map(function(a){return b.call(this,a,d++)},c)}function forEach(b,c){var d=1;a(this).forEach(function(a){b.call(this,a,d++)},c)}return[Set,add,has,delete_,map,forEach]})}('toString',Object,Function.prototype,Function('return this')(),typeof exports==='undefined'?this:exports,{})


